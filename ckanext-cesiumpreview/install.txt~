To add Cesium Previewer

Unzip cesiumpreview.zip and either place the cesieumpreview folder in the CKAN location below or make a virtual link in CKAN to the cesiumviewer.

  ln -s ~/ausglobe/cesiumpreview ~/ckan/lib/default/src/ckan/ckanext/cesiumpreview

In the CKAN development.ini under storage settings add the plugin as first in the list

  edit /etc/ckan/default/development.ini
  ckan.plugins = cesium_viewer ...
  
There must be a more automatic way to update CKAN for the new plugin, but I'm just patching files in CKAN to handle the cesium previewer in the same way as the recline previewer. So first open setup.py for editing.

  edit ~/ckan/lib/default/src/ckan/setup.py
  
And add the following line under the recline_preview plugin entry (line ~76)

 'cesium_preview = ckanext.reclinepreview.plugin:CesiumPreview',
 
Then patch entry_points.txt

  edit ~/ckan/lib/default/src/ckan/ckan.egg-info/entry_points.txt
  
And add the following line under the recline_preview plugin entry (line ~76)

  cesium_preview = ckanext.cesiumpreview.plugin:CesiumPreview   
  
That should be it. The cesium previewer is pointing to the instance at nationalmap.research.nicta.com.au. If you need to update the cesium_previewer path to a different location then edit the vis_server variable in preview_cesium.js

  nano ~/ausglobe/cesiumpreview/theme/public/preview_cesium.js
  
If all went correctly you should be able to start the CKAN server and for any items that have their format explicitly set to one JSON, GEOJSON, KML, or CZML the preview should be called up to display the data.

